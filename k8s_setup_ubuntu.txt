    1  ls
    2  pwd
    3  groups
    4  sudo apt install -y docker-compose
    5  ls
    6  systemctl status docker
    7  dpkg -l | grep -i docker
    8  sudo kubeadm init --pod-network-cidr=192.168.0.0/16
    9  sudo lsof -i:10259
   10  microk8s
   11  microk8s stop
   12  ccccc
   13  ccccccccccccccccccccccccccccccccccc
   14  microk8s stop
   15  sudo lsof -i:10259
   16  sudo kubeadm init --pod-network-cidr=192.168.0.0/16
   17  sudo swapoff -a
   18  sudo kubeadm init --pod-network-cidr=192.168.0.0/16
   19  ls ~/.kube/
   20  vim ~/.kube/join_string.txt
   21  kubeadm join 192.168.0.47:6443 --token hd7ikz.u35gdjmwnvksbiv6 \
   22  vim ~/.kube/join_string.txt
   23  ls
   24  sudo apt update && sudo apt -y upgrade
   25  ls
   26  microk8s
   27  ls
   28  vim
   29  systemctl status docker
   30  docker
   31  systemctl status docker
   32  ps aux | grep docker
   33  systemctl status dockerd
   34  cat <<EOF | sudo tee /etc/sysctl.d/k8s.conf
   35  net.bridge.bridge-nf-call-ip6tables = 1
   36  net.bridge.bridge-nf-call-iptables = 1
   37  EOF
   38  sudo sysctl --system
   39  ufw 
   40  ufw status
   41  sudo ufw status
   42  sudo ss -tulw
   43  nmap localhost
   44  sudo apt install -y nmap
   45  nmap localhost
   46  sudo apt-get update && sudo apt-get install -y apt-transport-https curl
   47  curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
   48  cat <<EOF | sudo tee /etc/apt/sources.list.d/kubernetes.list
   49  deb https://apt.kubernetes.io/ kubernetes-xenial main
   50  EOF
   51  sudo apt-get update
   52  sudo apt-get install -y kubelet kubeadm kubectl
   53  sudo apt-mark hold kubelet kubeadm kubectl
   54  kubectl get pods -A
   55  systemctl status kubelet
   56  sudo kubeadm init --pod-network-cidr=192.168.0.0/16
   57  sudo systemctl start docker.service
   58  docker
   59  docker container ls
   60  groups
   61  systemctl status docker
   62  sudo status docker.service
   63  sudo status dockerd.service
   64  ps aux | grep docker
   65  sudo apt install apt-transport-https ca-certificates curl software-properties-common
   66  curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
   67  sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu focal stable"
   68  sudo apt update
   69  apt-cache policy docker-ce
   70  sudo find / -name '*docker*'
   71  dpkg -l | grep -i docker
   72  snap remove --purge docker
   73  sudo snap remove --purge docker
   74  apt-cache policy docker-ce
   75  sudo apt install -y docker-ce
   76  sudo systemctl status docker
   77  sudo usermod -aG docker ${USER}
   78  su - ${USER}
   79  exit
   80  kubectl get pods -n tekton-pipelines -w
   81  kubectl get pods -A
   82  kubectl logs coredns-66bff467f8-rdt2n -n kube-system
   83  kubectl describe pod coredns-66bff467f8-rdt2n -n kube-system
   84  kubectl get configmaps -A
   85  kubectl
   86  kubectl | less
   87  kubectl get configmaps -A
   88  kubectl edit configmap calico-config -n kube-system
   89  kubectl get configmaps -A
   90  kubectl get pods -A
   91  kubectl delete pod yocto-meta-python-build-run-jkgxv-pod-kxvqn
   92  kubectl delete pod yocto-meta-python-build-run-jkgxv-pod-kxvqn -n tekton-pipelines
   93  kubectl get pods -A
   94  kubectl logs yocto-meta-python-build-run-5glff-pod-kbvws -n tekton-pipelines
   95  kubectl logs coredns-66bff467f8-rdt2n -n kube-system
   96  kubectl get pods -A
   97  kubectl logs calico-node-xr9n4 -n kube-system
   98  kubectl logs calico-node-xr9n4 -n kube-system | less
   99  kubectl get pods -A
  100  kubectl logs coredns-66bff467f8-rdt2n -n kube-system
  101  kubectl get network
  102  kubectl get pods -A
  103  kubectl get svc -A
  104  kubectl describe svc kube-dns -n kube-system
  105  kubectl logs kube-dns -n kube-system
  106  kubectl run -it --rm --restart=Never --image=busybox busybox
  107  kubectl run -it --rm --restart=Never --image=infoblox/dnstools:latest dnstools
  108  kubectl get pods -n kube-system -l k8s-app=kube-dns -o name
  109  iptables -w -P FORWARD ACCEPT
  110  sudo iptables -w -P FORWARD ACCEPT
  111  kubectl run -it --rm --restart=Never --image=infoblox/dnstools:latest dnstools
  112  kubectl get pods -A
  113  kubectl get svc -A
  114  kubectl apply -f https://k8s.io/examples/admin/dns/dnsutils.yaml
  115  kubectl get pods dnsutils
  116  kubectl exec -i -t dnsutils -- nslookup kubernetes.default
  117  kubectl exec -ti dnsutils -- cat /etc/resolv.conf
  118  kubectl logs --namespace=kube-system -l k8s-app=kube-dns
  119  kubectl get svc --namespace=kube-system
  120  kubectl get endpoints kube-dns --namespace=kube-system
  121  kubectl -n kube-system edit configmap coredns
  122  systemd-resolve 
  123  kubectl get endpoints kube-dns --namespace=kube-system
  124  kubectl -n kube-system edit configmap coredns
  125  kubectl get svc --namespace=kube-system
  126  kubectl get pods dnsutils
  127  vim /etc/systemd/system/kubelet.service.d/10-kubeadm.conf
  128  sudo vim /etc/systemd/system/kubelet.service.d/10-kubeadm.conf
  129  vim /run/systemd/resolve/resolv.conf
  130  vim /etc/systemd/system/kubelet.service.d/10-kubeadm.conf
  131  sudo vim /etc/systemd/system/kubelet.service.d/10-kubeadm.conf
  132  sudo systemctl daemon-reload
  133  sudo systemctl restart kubelet
  134  systemctl status kubelet
  135  kubectl get svc --namespace=kube-system
  136  kubectl logs --namespace=kube-system -l k8s-app=kube-dns
  137  kubectl get pods -A
  138  tkn task run yocto-meta-python-build
  139  tkn task start yocto-meta-python-build
  140  tkn task start yocto-meta-python-build -n tekton-pipelines
  141  tkn taskrun logs yocto-meta-python-build-run-flqbn -f -n tekton-pipelines
  142  systemctl status kubelet
  143  kubect get pods -A
  144  kubectl get pods -A
  145  kubectl get pods -A -o wide
  146  sudo kubeadm reset
  147  iptables -L
  148  sudo iptables -L
  149  sudo iptables -F
  150  sudo iptables -L
  151  sudo iptables -L | less
  152  sudo kubeadm init
  153  ls
  154  vim ~/.kube/join_string.txt 
  155  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  156  ls -l ~/.kube/
  157  kubectl get pods
  158  kubectl get pods -A
  159  kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
  160  kubectl get pods -A
  161  kubectl logs kube-flannel-ds-amd64-k7d44 -n kube-system
  162  kubectl get pods -A
  163  kubectl logs kube-flannel-ds-amd64-k7d44 -n kube-system
  164  sudo kubeadm reset
  165  sudo kubeadm init --pod-network-cidr=10.244.0.0/16
  166  vim ~/.kube/join_string.txt 
  167  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  168  sudo chown $(id -u):$(id -g) $HOME/.kube/config
  169  kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
  170  kubectl get pods -A
  171  kubectl logs kube-flannel-ds-amd64-66n2r -n kube-system
  172  kubectl get pods -A
  173  kubectl logs coredns-66bff467f8-d59d5 -n kube-system
  174  kubectl describe nodes | grep -i taint
  175  kubectl taint nodes --all node-role.kubernetes.io/master-
  176  kubectl logs coredns-66bff467f8-d59d5 -n kube-system
  177  kubectl get pods -A
  178  kubectl logs coredns-66bff467f8-d59d5 -n kube-system
  179  systemctl status kubelet
  180  ls /etc/cni/net.d/
  181  rm /etc/cni/net.d/10-calico.conflist /etc/cni/net.d/calico-kubeconfig 
  182  sudo rm /etc/cni/net.d/10-calico.conflist /etc/cni/net.d/calico-kubeconfig 
  183  kubectl get pods -A
  184  kubectl logs coredns-66bff467f8-m642r -n kube-system
  185  kubectl get pods -A
  186  kubectl logs coredns-66bff467f8-m642r -n kube-system
  187  kubectl apply --filename https://storage.googleapis.com/tekton-releases/pipeline/latest/release.yaml
  188  kubectl get pods -A
  189  kubectl create configmap config-artifact-pvc                          --from-literal=size=10Gi                          --from-literal=storageClassName=manual                          -o yaml -n tekton-pipelines                          --dry-run=client | kubectl replace -f -
  190  kubectl create configmap config-artifact-pvc                          --from-literal=size=100Gi                          --from-literal=storageClassName=manual                          -o yaml -n tekton-pipelines                          --dry-run=client | kubectl replace -f -
  191  tkn 
  192  pwd
  193  history
  194  history | less
  195  history > k8s_setup_ubuntu.txt
